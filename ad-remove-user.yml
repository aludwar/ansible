---
- name: Access Removal - User off-boarding
  hosts: "{{ _hosts | default('os_windows') }}"
  gather_facts: false
  vars:
    sam_account_name: aludwar
    firstname: Andrew
    surname: Ludwar

  tasks:
    - name: Remove AD Account
      microsoft.ad.user:
        name: "{{ firstname }} {{ surname }}"
        firstname: "{{ firstname }}"
        surname: "{{ surname }}"
        sam_account_name: "{{ firstname[0] }}{{ surname }}"
        state: absent
